# FreePBX Outgoing Call API

–≠—Ç–æ—Ç API –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ —Å FreePBX-—Å–µ—Ä–≤–µ—Ä–∞ –ø—É—Ç—ë–º —Å–æ–∑–¥–∞–Ω–∏—è `.call` —Ñ–∞–π–ª–∞ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `outgoing`. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º `Local/` –∫–∞–Ω–∞–ª–æ–≤, —á—Ç–æ–±—ã –≤—ã–∑–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –Ω–æ–º–µ—Ä, –∑–∞—Ç–µ–º —Å–æ–µ–¥–∏–Ω–∏—Ç—å –µ–≥–æ —Å –≤–Ω–µ—à–Ω–∏–º –∞–±–æ–Ω–µ–Ω—Ç–æ–º.

---

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç API-–∫–ª—é—á –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:

```
Authorization: Bearer YOUR_API_KEY
```

---

## üîó Endpoint

```
GET /api/make_call.php
```

---

## üì• –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä       | –¢–∏–ø     | –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------------|----------|------------|----------|
| `from`         | —Å—Ç—Ä–æ–∫–∞  | ‚úÖ         | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –Ω–æ–º–µ—Ä, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤—ã–∑–æ–≤ |
| `to`           | —Å—Ç—Ä–æ–∫–∞  | ‚úÖ         | –í–Ω–µ—à–Ω–∏–π –∏–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –Ω–æ–º–µ—Ä, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π —Å–æ–≤–µ—Ä—à–∞–µ—Ç—Å—è –∑–≤–æ–Ω–æ–∫ |
| `external_id`  | —Å—Ç—Ä–æ–∫–∞  | ‚ùå         | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π ID, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `userfield` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è |

---

## üß™ –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

```http
GET /api/make_call.php?from=101&to=89998887766&external_id=crm-2345
Authorization: Bearer my-secret-key-123
```

---

## ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç

```json
{
  "status": "OK",
  "from": "101",
  "to": "89998887766",
  "external_id": "crm-2345",
  "filename": "call-abc123"
}
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –ö–∞–Ω–∞–ª `Local/<from>@<context>` –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –∑–≤–æ–Ω–æ–∫ –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –Ω–æ–º–µ—Ä
- –ï—Å–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ `from` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–≤–µ—á–∞–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, SIP —Å–æ—Ñ—Ç—Ñ–æ–Ω), –≤—ã–∑–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ä–∞–∑—É —Å–æ–µ–¥–∏–Ω—ë–Ω
- –í `.call` —Ñ–∞–π–ª–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–µ `UserField`, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ CDR (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç `outgoing_context` –≤ –≤–∞—à–µ–º `.api.env.php`

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `.api.env.php`:

```php
return [
    'api_key' => 'your-secret-key',
    'outgoing_path' => '/var/spool/asterisk/outgoing',
    'outgoing_temp_path' => '/tmp',
    'outgoing_context' => 'from-internal'
];
```

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ API –ø–æ IP, API-–∫–ª—é—á—É –∏–ª–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/var/spool/asterisk/outgoing`
- –ù–µ –ø–æ–∑–≤–æ–ª—è–π—Ç–µ —É–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ `Channel:` –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

---
